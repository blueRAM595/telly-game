<!-- Подключаем наш загрузчик -->
<script src="pojav.js"></script>

<script>
    // Сама функция запуска
    window.launchGame = async function() {
        const library = window.Pojav || window.PojavJS || window.default;
        
        if (!library) {
            alert("Движок еще не скачался из интернета. Подожди 5 секунд и нажми еще раз.");
            return;
        }

        try {
            const nick = document.getElementById('username').value;
            if (nick.length < 3) return alert("Ник короткий");

            document.getElementById('launcher').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';

            const mc = await library.createRuntime({
                canvas: document.getElementById('canvas'),
                version: '1.20.1',
                root: './mods/',
                username: nick,
                memory: 4096,
                mods: ['autotelly.jar', 'fabric-api.jar']
            });
            await mc.start();
        } catch (e) {
            console.error(e);
            alert("Ошибка запуска: " + e.message);
        }
    };
</script>
